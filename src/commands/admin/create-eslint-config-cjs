const fs = require('fs');
const { EmbedBuilder } = require('discord.js');

module.exports = {
  name: 'create-eslint-config-cjs',
  description: 'Cria um eslint.config.js compatível com CommonJS',
  ownerOnly: true,
  async execute(message) {
    const content = `module.exports = [
  {
    files: ['**/*.js'],
    languageOptions: {
      ecmaVersion: 2021,
      sourceType: 'module',
    },
    rules: {
      semi: ['error', 'always'],
      quotes: ['error', 'single'],
    },
  },
];`;

    try {
      fs.writeFileSync('eslint.config.js', content);

      const embed = new EmbedBuilder()
        .setColor(0x00ff00)
        .setTitle('✅ Arquivo de configuração CommonJS criado')
        .setDescription('O arquivo `eslint.config.js` (modo CommonJS) foi criado com sucesso.');

      return message.reply({ embeds: [embed] });
    } catch (e) {
      return message.reply(`❌ Erro ao criar o arquivo:\n\`\`\`${e.message}\`\`\``);
    }
  },
};
